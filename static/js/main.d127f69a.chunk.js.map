{"version":3,"sources":["components/Form.js","components/Photo.js","components/PhotoGallery.js","App.js","index.js"],"names":["Form","noMatch","photos","searchValue","trendingTopics","handleSearchValueChange","handleSubmit","inputRef","useRef","useState","matches","setMatches","useEffect","current","focus","displayMatches","value","length","arrayOfTags","data","forEach","tags","push","wordToMatch","matchArray","filter","elem","regex","RegExp","title","match","uniqMatchArray","Set","className","href","target","rel","onSubmit","onClick","htmlFor","type","name","placeholder","onChange","onKeyUp","ref","map","idx","e","topic","i","id","Photo","user","src","srcBigger","isBig","setIsBig","clientY","setClientY","handleMakeSmaller","alt","pageY","window","scrollTo","style","profile_image","small","twitter_username","location","PhotoGallery","savedValue","handleClickTag","sortedTags","setSortedTags","arrayTags","photo","tag","tagsCount","reduce","obj","item","toLowerCase","tagsCountSorted","Object","fromEntries","entries","sort","a","keys","sortedTag","urls","regular","App","setSearchValue","setSavedValue","setPhotos","backgroundImg","setNoMatch","key","fetch","then","resp","json","total","charAt","toUpperCase","slice","results","preventDefault","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d127f69a.chunk.js","sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport './Form.scss';\nimport data from '../db.json';\n\nfunction Form( {noMatch, photos, searchValue, trendingTopics, handleSearchValueChange, handleSubmit} ) {\n\n  const inputRef = useRef(null);\n\n  const [matches, setMatches] = useState([]);\n\n  useEffect(() => {\n    inputRef.current.focus();\n  })\n\n  const handleFocus = () => {\n    inputRef.current.focus();\n  }\n\n  const handleClear = () => {\n    handleSearchValueChange('');\n    inputRef.current.focus();\n    setMatches([]);\n  }\n\n  const findMatches = (wordToMatch, data) => {\n    return data.filter(elem => {\n      const regex = new RegExp(wordToMatch, 'gi');\n      return elem.title.match(regex);\n    })\n  }\n\n  const displayMatches = () => {\n    handleSearchValueChange(inputRef.current.value);\n\n    if (searchValue.length < 3) return;\n\n    const arrayOfTags = [];\n    data.forEach(tags=> {\n      return arrayOfTags.push(...tags.tags)\n      })\n    const matchArray = findMatches(searchValue, arrayOfTags);\n    const uniqMatchArray = [...new Set(matchArray)];\n    setMatches(uniqMatchArray);\n  }\n\n  return (\n    <section className={photos.length === 0 ? 'container fullForm' : 'container smallForm'}>\n      <header className='row header'>\n        {photos.length === 0 &&\n          <>\n            <h1 className='header__title'>Unsplash</h1>\n            <p className='header__text'>The internet's source of {' '}\n              <a  href=\"https://unsplash.com/\" \n                  target='_blank' \n                  rel='noreferrer'> freely-usable images</a>.\n            </p>\n            <p className='header__text'>Powered by creators everywhere.</p>\n          </> \n        }\n        <form className={noMatch ? 'header__form header__form--error' : 'header__form'} onSubmit={handleSubmit}>\n          <i className=\"fas fa-search\" onClick={handleFocus} />\n          {noMatch && <label htmlFor='content' className='header__form__label'>No match found!</label>}\n          <input \n            type='text'\n            name='content'\n            className={noMatch ? 'header__form__input header__form__input--error' : 'header__form__input'}\n            placeholder='Search free high-resolution photos'\n            value={searchValue}\n            onChange={displayMatches}\n            onKeyUp={displayMatches}\n            ref={inputRef}\n            />\n          {searchValue ? <i className=\"fas fa-times\" onClick={handleClear}/> : null}\n          {searchValue.length < 3 ?\n            null\n            :\n            <ul className='header__form__list'>\n              {matches.length === 0 ?\n                <li className='form__list__elem'>No Match</li>\n                :\n                matches.map((match, idx) => {\n                return <li key={idx} className='form__list__elem' onClick={e => handleSubmit(e, match.title)}>{match.title}</li>\n                })\n              }\n            </ul>\n          }\n        </form>\n        {photos.length === 0 && trendingTopics.length !== 0 &&\n          <p className='header__text'>Trending: \n            {trendingTopics.map((topic, i) => {\n              if (trendingTopics.length === i +1) return <span key={topic.id}> {topic.title}</span>;\n              return <span key={topic.id}> {topic.title},</span>\n              }\n            )}\n          </p>\n        }\n      </header>\n    </section>\n  );\n}\n\nexport default Form;\n","import { useState } from 'react';\nimport './Photo.scss';\n\nconst Photo = ( {user, src, srcBigger} ) => {\n\n  const [isBig, setIsBig] = useState(false);\n  const [clientY, setClientY] = useState(0);\n\n  const handleMakeBigger = e => {\n    setIsBig(true);\n    setClientY(e.pageY);\n    window.scrollTo(0, e.pageY + 50)\n  }\n\n  const handleMakeSmaller = e => {\n    setIsBig(false);\n  }\n\n  return (\n    <li className='photoGallery__list__elem'>\n      <img \n        className='list__elem__img'\n        src={src} \n        alt='' \n        onClick={handleMakeBigger} \n      />\n      {isBig && \n        <div className='list__elem__container'>\n          <div className='elem__container__box'  style={{'top': `${clientY}px`}}>\n            <div className='container__box__header'>\n              <div className='box__header__user'>\n                <img src={user.profile_image.small} alt='' />\n                <div>\n                  <p>{user.name}</p>\n                  {user.twitter_username && <p>@{user.twitter_username}</p>}\n                </div>\n              </div>\n              <div className='box__header__delete' onClick={handleMakeSmaller}><i className=\"fas fa-times\"/></div>\n            </div>\n            <img \n              className='container__box__img'\n              src={srcBigger} \n              alt='' \n              onClick={handleMakeSmaller} \n            />\n            <div className='container__box__footer'>\n              <p>{user.location}</p>\n            </div>\n          </div>\n        </div>\n      }\n    </li>\n  )\n}\n\nexport default Photo;","import './PhotoGallery.scss';\nimport Photo from './Photo';\nimport { useEffect, useState } from 'react';\n\nconst PhotoGallery = ( {photos, savedValue, handleClickTag} ) => {\n\n  const [sortedTags, setSortedTags] = useState([]);\n\n  useEffect(() => {\n    let arrayTags = [];\n\n    photos.map(photo => {\n      return photo.tags.map((tag => {\n        return arrayTags.push(tag.title);\n      }));\n    })\n\n  const tagsCount = arrayTags.reduce((obj, item) => {\n    const searched = savedValue.toLowerCase();\n    if (item === searched) return obj;\n      if (!obj[item]) obj[item] = 0;\n      obj[item]++;\n      return obj;\n    }, {});\n\n    const tagsCountSorted = Object.fromEntries(Object.entries(tagsCount).sort(([,a],[,b]) => b - a));\n\n    setSortedTags(Object.keys(tagsCountSorted));\n\n  }, [photos])\n\n  return (\n    <section className='container photoGallery'>\n      <div className='row photoGallery__description'>\n        <h2 className='photoGallery__description__title'>{savedValue}</h2>\n      </div>\n      <div className='row photoGallery__description'>\n        {sortedTags && \n          sortedTags.map((sortedTag, idx) => {\n            return <div key={idx} className='photoGallery__description__tag' onClick={e => handleClickTag(e, sortedTag)}>{sortedTag}</div>\n          })\n        }\n      </div>\n      <ul className='row photoGallery__list'>\n        {photos.map(photo =>\n            <Photo key={photo.id} src={photo.urls.small} srcBigger={photo.urls.regular} user={photo.user}/>\n        )}\n      </ul>\n    </section>\n  )\n}\n\nexport default PhotoGallery;","\nimport { useEffect, useState } from 'react';\nimport './App.scss';\nimport Form from './components/Form';\nimport PhotoGallery from './components/PhotoGallery';\n\nfunction App() {\n  const [searchValue, setSearchValue] = useState('');\n  const [savedValue, setSavedValue] = useState('');\n  const [photos, setPhotos] = useState([]);\n  const [backgroundImg, setBackgroundImg] = useState('');\n  const [trendingTopics, setTrendingTopics] = useState([]);\n  const [noMatch, setNoMatch] = useState(false);\n  const key = \"q8pGKlT0Khz6viOf9A5MXa-3XvXETz3f8xNcchKr9MY\";\n\n  const handleSubmit = (e, value) => {\n    if (value) {\n      fetch(`https://api.unsplash.com/search/photos/?client_id=${key}&query=${value}&per_page=30`)\n      .then(resp => resp.json()\n      .then(data => {\n        if (data.total === 0) {\n          setNoMatch(true);\n        } else {\n          setNoMatch(false);\n        }\n        setSearchValue(value)\n        setSavedValue(value.charAt(0).toUpperCase() + value.slice(1));\n        setPhotos(data.results);\n      }))\n    } else {\n      e.preventDefault();\n      fetch(`https://api.unsplash.com/search/photos/?client_id=${key}&query=${searchValue}&per_page=30`)\n      .then(resp => resp.json()\n      .then(data => {\n        if (data.total === 0) {\n          setNoMatch(true);\n        } else {\n          setNoMatch(false);\n        }\n        setSavedValue(searchValue);\n        setPhotos(data.results);\n      }))\n    }\n  }\n\n  const handleClickTag = (e ,value) => {\n    fetch(`https://api.unsplash.com/search/photos/?client_id=${key}&query=${value}&per_page=30`)\n    .then(resp => resp.json()\n    .then(data => {\n      if (data.total === 0) {\n        setNoMatch(true);\n      } else {\n        setNoMatch(false);\n      }\n      setSearchValue(value)\n      setSavedValue(value.charAt(0).toUpperCase() + value.slice(1));\n      setPhotos(data.results);\n    }))\n  }\n\n  // useEffect(() => {\n    // fetch(`https://api.unsplash.com/photos/random/?client_id=${key}`)\n    // .then(resp => resp.json()\n    // .then(data => setBackgroundImg(data.urls.regular)))\n\n    // fetch(`https://api.unsplash.com/topics/?client_id=${key}&per_page=5`)\n    // .then(resp => resp.json()\n    // .then(data => setTrendingTopics(data)))\n  // }, [])\n\n  return (\n    <>\n      {photos.length === 0 && <section className=\"hero\" style={backgroundImg ? {\"backgroundImage\": `url(${backgroundImg})`} : null} />}\n      <Form \n        noMatch={noMatch}\n        photos={photos}\n        searchValue={searchValue} \n        trendingTopics={trendingTopics}\n        handleSearchValueChange={setSearchValue}\n        handleSubmit={handleSubmit}\n      />\n      {photos.length !==0 && \n        <PhotoGallery \n          photos={photos}\n          savedValue={savedValue}\n          handleClickTag={handleClickTag}\n        />\n      }\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}